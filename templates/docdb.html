{% extends 'base.html' %}

{% block title %}Doctor's Dashboard{% endblock %}

{% block content %}
<div class="header" style="background-color: #a2d2ff; color: #023047; padding: 1rem; display: flex; justify-content: space-between; align-items: center;">
    <h1>Welcome Dr. {{ doctor.name }}</h1>
    <a href="{{ url_for('logout') }}" style="color: #023047; text-decoration: none; font-size: 1rem; background-color: #ffadad; padding: 0.5rem 1rem; border-radius: 5px;">Logout</a>
</div>

<div class="section mt-4">
    <h2>Upcoming Appointments</h2>
    <table class="table table-bordered mt-2">
        <thead class="table-primary">
            <tr>
                <th>Sr No.</th>
                <th>Patient Name</th>
                <th>Patient History</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for idx, appointment in Appointments %}
            <tr>
                <td>{{ idx }}</td>
                <td>{{ appointment.patient.first_name }} {{ appointment.patient.last_name }}</td>
                <td><a href="{{ url_for('view_patient_profile', patient_id=appointment.patient.id) }}" class="btn btn-info btn-sm">View Profile</a></td>
                <td>
                    <a href="{{ url_for('mark_complete', appointment_id=appointment.id) }}" class="btn btn-success btn-sm">Mark Complete</a>
                    <a href="{{ url_for('cancel_appointment', appointment_id=appointment.id) }}" class="btn btn-danger btn-sm">Cancel</a>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4" class="text-center">No upcoming appointments.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="section mt-4">
    <h2>Assigned Patients</h2>
    {% for patient in assigned_patients %}
    <div class="list-item" style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; border: 1px solid #dee2e6; border-radius: 5px; margin-bottom: 0.5rem; background-color: #ffffff;">
        <span>{{ patient.first_name }} {{ patient.last_name }}</span>
        <a href="{{ url_for('view_patient_profile', patient_id=patient.id) }}" class="btn btn-info btn-sm">View</a>
    </div>
    {% else %}
    <p>No patients assigned.</p>
    {% endfor %}
</div>


{% endblock %}
