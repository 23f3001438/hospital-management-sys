{% extends "base.html" %}
{% block title %}{{ department.name }} - Department{% endblock %}

{% block content %}
{% block home_button %}{% endblock %}

<div class="card" style="max-width: 900px; margin: 0 auto; padding: 2.5rem;">
    <h2 style="text-align:center; margin-bottom: 0.6rem;">
        {{ department.name }}
    </h2>

    {% if department.description %}
        <p style="text-align:center; color:#6c7aa0; margin-bottom: 1rem;">
            {{ department.description }}
        </p>
    {% endif %}

    <p style="text-align:center; font-size:0.9rem; color:#4b63a8; margin-bottom:2rem;">
        Total Appointments in this Department:
        {{ doctors | sum(attribute='num_appointments') }}
    </p>

    <h3 style="margin-bottom:1.2rem; text-align:center;">
        Doctors in {{ department.name }}
    </h3>

    {% if doctors %}
        <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1.5rem;">
            {% for doctor in doctors %}
                <div class="card" style="padding:1.5rem;">
                    <h4 style="margin-bottom:0.4rem;">{{ doctor.name }}</h4>

                    <p style="margin:0; color:#4b63a8;">
                        {{ doctor.specialization }}
                    </p>

                    <p style="font-size:0.85rem; margin-top:0.6rem; color:#6c7aa0;">
                        Scheduled Appointments: {{ doctor.num_appointments }}
                    </p>

                    <a href="{{ url_for('view_doctor', doctor_id=doctor.id, patient_id=patient.id) }}"
                       class="view-btn"
                       style="display:block; text-align:center; margin-top:1rem; padding:10px;">
                        View Profile
                    </a>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p style="text-align:center; color:#6c7aa0;">
            No doctors available in this department.
        </p>
    {% endif %}
</div>

{% endblock %}
